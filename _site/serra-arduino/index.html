<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>[Progetto #4] Serra Automatizzata &#8211; francesco la vella</title>
    <meta name="description" content="Serra Automatizzata con Arduino">
    <meta name="keywords" content="Arduino, Makers, agricolture, greenhouse, home automation">
    <link rel="canonical" href="http://localhost:4000/serra-arduino/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="[Progetto #4] Serra Automatizzata">
    <meta name="twitter:description" content="Serra Automatizzata con Arduino">
    <meta name="twitter:site" content="@francescolv">
    <meta name="twitter:creator" content="@francescolv">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://localhost:4000/assets/img/profile.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="it_IT">
    <meta property="og:type" content="article">
    <meta property="og:title" content="[Progetto #4] Serra Automatizzata">
    <meta property="og:description" content="Serra Automatizzata con Arduino">
    <meta property="og:url" content="http://localhost:4000/serra-arduino/">
    <meta property="og:site_name" content="francesco la vella">
    <meta property="og:image" content="http://localhost:4000/assets/img/profile.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-144x144.png" />
<link rel="icon" type="image/png" href="http://localhost:4000/assets/img/favicon/favicon.png" />
<link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon/favicon.ico" />

    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="francesco la vella" href="http://localhost:4000/feed.xml" />
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css">
<!-- cookie -->
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "transparent",
      "text": "#f1d600",
      "border": "#f1d600"
    }
  }
})});
</script>

<!-- google analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134462764-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-134462764-1');
</script>

</head>

  <body>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
        i = 0;
        $('.menuAc').css({
          'color': 'rgba(52, 152, 219, 1)'
        });
        $('.menuAc').click(function(){
          $(this).next('.menuMobil').animate({width:'toggle'},350);
          if (i%2==0) {
            $('.footer').css({
              'filter'         : 'blur(5px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(5px)'
            });
            $('.ust').css({
              'filter'         : 'blur(5px)'
            });
            $('ul.menu').css({
              'animation-duration': '0.1s'
            });
            i++;
          }
          else {
            $('.footer').css({
              'filter'         : 'blur(0px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(0px)'
            });
            $('.ust').css({
              'filter'         : 'blur(0px)'
            });
            i++;
          }

        });
      });
    </script>
    <div class="menuAc">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <div class="menuMobil">
          <nav class="nav-home">
      <ul class="menu">
            
				    
				    <li><a class="link" href="http://localhost:4000/" >Home</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/blog/" >Blog</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/projects/" >Projects</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/coding/" >Coding</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/about/" >About</a></li>
				
        </ul>
    </nav>

    </div>
    <div class="ust">
      <div class="ortalaAna">
        <div class="baslikAna">
          francesco la vella
        </div>

        <div class="pc">
              <nav class="nav">
        <ul class="menuAna">
            
				    
				    <li class="item"><a class="link" href="http://localhost:4000/" >Home</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/blog/" >Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/projects/" >Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/coding/" >Coding</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/about/" >About</a></li>
				
        </ul>
    </nav>

        </div>
      </div>
    </div>
    <div class="ortalaAna">
      <div class="yazilar">
        <div class="yazi">
          <div class="ustr">
            <h2>[Progetto #4] Serra Automatizzata</h2>
            <div class="yazibilgisi">
              07 May 2019 tarihinde yayınlandı.
            </div>
          </div>
          <hr>
          <div class="content">
            <h1 id="serra-automatizzata-con-arduino--cc-by-nc-sa"><strong>Serra Automatizzata con Arduino</strong> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">© CC BY-NC-SA</a></h1>
<h2 id="obiettivi"><strong>Obiettivi</strong></h2>
<p>Costruzione di una Serra in outdoor per la semina di colture da trasferire poi successivamente in campo aperto.</p>

<p>L’Automazione prevede l’aquisizione di dati come Temperature, Umidità dell’aria, Umidità del terreno, Luminosità ambientale e di conseguenza avviare una pompa per l’irrigazione, accendere LED, avviare ventole per il raffreddamento.</p>

<h2 id="componenti-e-attrezzature"><strong>Componenti e attrezzature</strong></h2>
<ol>
  <li>Arduino Mega R3 2560</li>
  <li>Modulo relay 4 Canali DC 5V</li>
  <li>Display I2C LCD 2004 20 x 4</li>
  <li>Photoresistori 5 mm GL5516</li>
  <li>Igrometro</li>
  <li>Sensore umidità DHT11</li>
  <li>Alimentatore 10A 12V</li>
  <li>Converter 12V a 5V 3A DC/DC</li>
  <li>Resistenze 220 ohm</li>
  <li>Strisia led 5m DC 12V, Rosso Blu 5:1</li>
  <li>Pompa Mini DC12V 9W</li>
  <li>Breadboard</li>
  <li>Fili elettrici e connettori</li>
  <li>Sistema tubi irrigazione</li>
</ol>

<h2 id="descrizione"><strong>Descrizione</strong></h2>
<p>Per questo progetto sono partito da una serra che già avevamo in uso, ma con un sistema manuale di monitoraggio e irrigazione.</p>

<p>La serra ha una superficie di 2m x 1m e altezza 1m</p>

<p>Tutto il materiale è stato acquistato su amazon, ma se non si hanno particolari esigenze di tempo molto può essere acquistato anche su Aliexpress con un risparmio economico notevole</p>

<p>L’Assemblaggio non è complesso, si parte dall’Arduino Mega, scelto per le sue ampie possibilità (un numero maggiore di porte di input/output ed una maggiore memoria destinata agli sketch), al quale collego i vari sensori: Un photoresitore per rilevare la luminosità ambientale ed attivare di notte la striscia a LED; l’Igrometro per rilevare l’umidità del terreno ed attivare la pompa dell’acqua; Il sensore di temperatura e umidità ambientale per attivare in futuro le ventole di raffreddamento.</p>

<p>La striscia a LED, la pompa dell’acqua e le ventole sono connesse al modulo Relay</p>

<p>I dati rilevati sono visibili attraverso un display</p>

<p>La pompa dell’aqua pesca l’acqua in un contenitore posto al di fuori della serra e in caso l’umidità del terreno scenda al di sotto di un determinato valore pompa acqua verso un sistema di tubi per l’irrigazione a spruzzo posti nel tetto della serra</p>

<p>In futuro prevedo di rilevare la quantità di acqua nella cisterna che eventualmente può essere collegata direttamente al sistema irriguo e auto riempirsi, inoltre è previsto un sistema di raffreddamento attraverso delle ventole poste ai lati della serra e per serre che prevedono finestre apribili con bracci a pistone un sistema di apertura delle finestre automatizzate in base alla temperatura interna.</p>

<h2 id="codice"><strong>Codice</strong></h2>
<p>Librerie da Installare:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//   Programma remixato da Francesco La Vella da un programma realizzato da Letterio Bavastrelli e rilasciato con GNU GPL V.3
//   Serra autonoma con sensore di temperatura e umidità (DHT11), igrometro, fotoresistore, display LCD 20x4, sensore livello acqua e relè.

//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.

//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.

//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see &lt;https://www.gnu.org/licenses/gpl-3.0.html&gt;.

const int valore_limite = 990; //Valore dell'igrometro al quale il relay sarà ON

//DHT11 Sensor:
#include "DHT.h"
#define DHTPIN 12     // Sensore collegato al PIN 12
#define DHTTYPE DHT11   // DHT 11
DHT dht(DHTPIN, DHTTYPE);


//I2C LCD:
#include &lt;Wire.h&gt; // Libreria WIRE (da aggiornare se non funziona)
#include &lt;LiquidCrystal_I2C.h&gt; // Libreria LCD I2C

// LCD I2C address
LiquidCrystal_I2C lcd(0x27, 2, 1, 0, 4, 5, 6, 7, 3, POSITIVE); // da cambiare se si ha un modello diverso


void setup()
{
// PIN 11 al Relè - IN1  // Pompa dell'acqua
Serial.begin(9600);
  pinMode(11, OUTPUT);

// PIN 10 al relè - IN2  // striscia a led
  pinMode(10, OUTPUT);

// PIN 9 al relè - IN3  // ventole raffreddamento serra
  pinMode(9, OUTPUT);

//PIN 13 al LED  //non sto usando per ora
//  pinMode (13, OUTPUT);

//I2C LCD
Serial.begin(9600);
  lcd.begin(20,4);
  Serial.println("Serra Autonoma di kireime");
  
// Avvio sensore DHT11  
  dht.begin();
}


void loop()
{

// Fotoresistore
int Lumen = analogRead (A0); // Lumen come intero della lettura del pin A0
Serial.print("Sensore crepuscolare: ");
Serial.println(Lumen, DEC); // Stampa un valore decimale del fotoresistore
  
if (Lumen &gt; 750) {
  digitalWrite (10, HIGH); // Se il valore di Lumen è superiore a 750 attiva relè
  lcd.setCursor(0,3);  // Indica posizione del cursore su LCD
  lcd.print("Buona Notte"); // Stampa su LCD il testo
  }
else {
  digitalWrite (10, LOW); // altrimenti spegne relè
  lcd.setCursor(0,3);  // Indica posizione del cursore su LCD
  lcd.print("Buon Giorno"); // Stampa su LCD il testo
  }
delay (2000);  // Intervallo di 2 secondi


//Livello Acqua  // per ora non sto usando
//int water = analogRead(A1);
//Serial.print ("Sensore acqua: ");
//Serial.println(water, DEC);  // Stampa il valore decimale del sensore di livello acqua
  
//  if (water &gt;= 100) {
    
//    lcd.setCursor(0,3);  // Indica posizione del cursore su LCD
//    lcd.print("Acqua: OK"); // Stampa su LCD il testo
//  }
//  else    
//    {
//    lcd.setCursor(0,3);  // Indica posizione del cursore su LCD
//    lcd.print("Acqua: BASSA"); // Stampa su LCD il testo
//    alarm();
//    flash();
//    delay(2000); // Intervallo di 2 secondi
//    }

// Igrometro
int igro = analogRead(A3); // Legge il valore analogico
int umdtrr = 0; // Variabile umidità suolo
umdtrr = map (igro, 100, 990, 100, 0); // converto il valore analogico in percentuale
Serial.print("Umidità del terreno: ");
Serial.print(umdtrr);
Serial.println ("%"); //Stampa a schermo il valore

if (igro &lt;= valore_limite)
  digitalWrite(11,LOW); // Attiva Relè 1
else
  digitalWrite(11,HIGH); // Spegni Relè 1
delay(2000); // Attende due secondi


// Lettura umidità e temperatura del sensore DHT11
int h = dht.readHumidity();
int t = dht.readTemperature();

// Misura la temperatura e se maggiore di 40 gradi attiva relè per accendere la ventola
if (t &gt;= 40 )
   digitalWrite (9, HIGH); // Attiva Relè 3
else
   digitalWrite (9, LOW); // Spegni Relè 3
delay (2000);

  Serial.print("Temp: ");
  Serial.print(t);
  Serial.print("C, Umid: ");
  Serial.print(h);
  Serial.println("%");


// impostare cursore sulla prima riga:
lcd.setCursor(0, 0);
lcd.print("Temperatura: ");
lcd.print(t);
lcd.print("C");
  
// imposta cursore sulla seconda riga:
lcd.setCursor(0,1);
lcd.print("Umidita': ");
lcd.print(h);
lcd.print("%");

// imposta il cursore sulla terza riga:
lcd.setCursor(0,2);
lcd.print("Umidita' terra: ");
lcd.print(umdtrr);
lcd.print("%");

}

// NON USATA PER ORA
/*
void alarm(){
  tone(3,850,700);  // Imposta tono acustico su PIN 3
  delay(150);       // Aspetta per 0,15 secondi
  tone(3,850,700);  // Imposta tono acustico su PIN 3
  delay(150);       // Aspetta per 0,15 secondi
}

void flash() {
  digitalWrite(13, HIGH);   // Imposta il LED su ON
  delay(1000);               // Aspetta per 1 secondo
  digitalWrite(13, LOW);    // Impostiamo il LED su OFF
  delay(1000);               // Aspetta per 1 secondo
}
*/
</code></pre></div></div>
<p><a href="/assets/img/serra/SERRA_DOMOTIZZATA.ino">Scarica lo sketch</a></p>

<h2 id="schema"><strong>Schema</strong></h2>
<p><img src="/assets/img/serra/serra_fzz.png" alt="img" /></p>

<p><a href="/assets/img/serra/Serra_domotizzata.fzz">Scarica lo schema in fritzing</a></p>

<h2 id="gallery"><strong>Gallery</strong></h2>
<p><a href="/photos/serra/">Guarda la raccolta fotografica</a></p>


          </div>
        </div>
      </div>
    </div>
    <div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = 'http://localhost:4000/serra-arduino/';  
this.page.identifier = '/serra-arduino/'; 
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://francescolavella-it.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//francescolavella-it.disqus.com/count.js" async></script>
                            

        <div class="footer">
      <div class="ortalaAna">
        <div class="copy">
          francesco la vella © 2025
        </div>
        <div class="sosyal">
                        <div class="social-links">
                  
                  <a href="http://twitter.com/francescolv" class="author-social" target="_blank"><i class="fa fa-2x fa-twitter-square"></i></a>
                  <a href="http://facebook.com/francescolv" class="author-social" target="_blank"><i class="fa fa-2x fa-facebook-square"></i></a>
                  
                  <a href="http://linkedin.com/in/francescolv" class="author-social" target="_blank"><i class="fa fa-2x fa-linkedin-square"></i></a>
                  
                  <a href="http://instagram.com/francescolv" class="author-social" target="_blank"><i class="fa fa-2x fa-instagram"></i></a>
                  
                  <a href="http://github.com/francescolv" class="author-social" target="_blank"><i class="fa fa-2x fa-github"></i></a>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
            </div>

        </div>
      </div>
    </div>

  </body>
</html>
